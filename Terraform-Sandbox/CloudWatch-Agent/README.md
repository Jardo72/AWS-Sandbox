# CloudWatch Agent Demo
Simple Terraform configuration which demonstrates CloudWatch Agent installed on a single EC2 instance. Metrics published by the CloudWatch Agent are presented by a CloudWatch dashboard. User data script for the EC2 instance installs:
* CloudWatch Agent
* Systems Manager Agent so that you can connect to the EC2 instance using the Session Manager feature of the Systems Manager
* Linux stress tool so that you can easily generate various types of loads on the EC2 instance

Configuration for the CloudWatch Agent is also generated by the user data script.

## Terraform Variables
The following snippet illustrates the values of the Terraform variables used during my experiments.
```hcl
aws_region = "eu-central-1"

resource_name_prefix = "CloudWatch-Agent-Demo"

ec2_instance_type = "t2.micro"

tags = {
  Stack         = "CloudWatch-Agent-Demo",
  ProvisionedBy = "Terraform"
}
```

## Load Generation on the EC2 Instance
The following commands illustrate how to generate various types of load on the EC2 instance. You can connect to the instance using the Session Manager feature of the Systems Manager.
```
# CPU load for 12 minutes
stress --cpu 2 --timeout 720

# memory load for 15 minutes
stress --vm 2 --vm-hang 5 --timeout 900

# disk I/O load for 10 minutes
stress --io 4 --timeout 600
```
